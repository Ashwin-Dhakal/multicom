#!/bin/sh

if [ ! -d "SOFTWARE_PATH/databases/prosys_database/hhsuite3_dbs" ]; then
  mkdir SOFTWARE_PATH/databases/prosys_database/hhsuite3_dbs
  mkdir SOFTWARE_PATH/databases/prosys_database/hhsuite3_dbs/profiles
fi




SOFTWARE_PATH/src/update_db/tools/hhsuite3/gen_hhblits_profile.pl SOFTWARE_PATH/tools/hhsuite-3.2.0/ 8 SOFTWARE_PATH/databases/prosys_database/seq/ SOFTWARE_PATH/databases/uniprot30/uniclust30_2018_08/uniclust30_2018_08 SOFTWARE_PATH/databases/prosys_database/fr_lib/sort90  SOFTWARE_PATH/databases/prosys_database/hhsuite3_dbs/profiles

perl SOFTWARE_PATH/src/update_db/tools/hhsuite3/prepare_db.pl SOFTWARE_PATH/databases/prosys_database/fr_lib/sort90  SOFTWARE_PATH/databases/prosys_database/hhsuite3_dbs/profiles SOFTWARE_PATH/databases/prosys_database/hhsuite3_dbs

export HHLIB=SOFTWARE_PATH/tools/hhsuite-3.2.0/
PATH=$PATH:$HHLIB/bin:$HHLIB/scripts


if [ ! -d "SOFTWARE_PATH/databases/prosys_database/hhsuite3_dbs/work/" ]; then
  mkdir SOFTWARE_PATH/databases/prosys_database/hhsuite3_dbs/work/
else
  rm SOFTWARE_PATH/databases/prosys_database/hhsuite3_dbs/work/*
fi

python $HHLIB/scripts/hhsuitedb.py -o SOFTWARE_PATH/databases/prosys_database/hhsuite3_dbs/work/hhsuite3_sort90 --cpu 10 --ia3m=SOFTWARE_PATH/databases/prosys_database/hhsuite3_dbs/a3m/* --ihhm=SOFTWARE_PATH/databases/prosys_database/hhsuite3_dbs/hhm/* --ics219=SOFTWARE_PATH/databases/prosys_database/hhsuite3_dbs/cs219/* --force

cp SOFTWARE_PATH/databases/prosys_database/hhsuite3_dbs/work/* SOFTWARE_PATH/databases/prosys_database/hhsuite3_dbs/




